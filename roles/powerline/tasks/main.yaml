---
- name: Ensure pip is installed (for Linux family)
  apt: pkg=python-pip state=latest
  become: true
  become_method: "sudo"
  when: ansible_os_family == "Debian"

- copy: src=install_powerline_darwin.sh dest=/tmp/install_powerline_darwin.sh mode=755
  when: ansible_os_family == "Darwin"

- name: Install powerline (for Darwin family)
  shell: /tmp/install_powerline_darwin.sh
  when: ansible_os_family == "Darwin"

- name: Clone patched fonts repo
  git: repo=git://github.com/powerline/fonts.git dest="{{ patched_fonts_path }}" accept_hostkey=yes

- name: Install patched fonts
  shell: "{{ patched_fonts_path }}/install.sh"
